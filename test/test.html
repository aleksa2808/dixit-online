<!DOCTYPE html>
<html>
<head>
	<title>test</title>
</head>
<body>


<canvas id="myCanvas"  style="background-image:url('vermillion.jpg');" ></canvas>

<style>
</style>


<script>
var canvas = document.getElementById("myCanvas");
var c = canvas.getContext("2d");
var 
		card1 = new Image(),
		card2 = new Image(),
		card3 = new Image(),
		card4 = new Image(),
		card5 = new Image(),
		card6 = new Image(),
		submit = new Image(),
		back = new Image(),
		selected = "",
		avatar1 = new Image(),
		avatar2 = new Image(),
		avatar3 = new Image(),
		avatar4 = new Image(),
		avatar5 = new Image(),
		points1=0,
		points2=0,
		points3=0,
		points4=0,
		points5=0,
		points6=0,
		submitted=false;
    
		card1.src = "001.png";
		card2.src = "002.png";
		card3.src = "003.png";
		card4.src = "004.png";
		card5.src = "005.png";
		card6.src = "006.png";
		submit.src = "submit.png";
		back.src = "back.png";
		avatar1.src = "avatar1.ico";
		avatar2.src = "avatar2.png";
		avatar3.src = "avatar3.png";
		avatar4.src = "avatar4.png";
		avatar5.src = "avatar5.png";
		
	window.onload = function () {
		canvas.addEventListener('click', handleMoveEvent2, false);
		canvas.addEventListener('mousemove', handleMoveEvent1, false);
	};
	
		

	
	
	
	

	function loadPlayers(canvas) {
		var c = canvas.getContext("2d");

		c.drawImage(avatar1, 100, 20, avatar1.width/3, avatar1.height/3);
		c.drawImage(avatar2, 300, 20, avatar1.width/3, avatar1.height/3);
		c.drawImage(avatar3, 500, 20, avatar1.width/3, avatar1.height/3);
		c.drawImage(avatar4, 700, 20, avatar1.width/3, avatar1.height/3);
		c.drawImage(avatar5, 900, 20, avatar1.width/3, avatar1.height/3);
		
		//plavi je propovedac, zeleni je onaj koji je predao kartu, a crveni je izasao iz igre
		c.font="bold 20px Arial";
		c.fillStyle="green";
		c.fillText("player1", 110, 135);
		
		c.font=" italic 15px Arial";
		c.fillStyle="black";
		c.fillText(""+points1+" points",110,155);
		
		c.font="bold 20px Arial";
		c.fillStyle="black";
		c.fillText("player2", 310, 135);
		
		c.font=" italic 15px Arial";
		c.fillText(""+points2+" points",310,155);
		
		c.font="bold 20px Arial";
		c.fillText("player3", 510, 135);
		
		c.font=" italic 15px Arial";
		c.fillText(""+points3+" points",510,155);
		
		c.font="bold 20px Arial";
		c.fillStyle="blue";
		c.fillText("player4", 710, 135);
		
		c.font=" italic 15px Arial";
		c.fillStyle="black";
		c.fillText(""+points4+" points",710,155);
		
		c.font="bold 20px Arial";
		c.fillStyle="red";
		c.fillText("player5", 910, 135);
		
		c.font=" italic 15px Arial";
		c.fillStyle="black";
		c.fillText(""+points5+" points",910,155);
		}		

	function loadCards(canvas, submitted, selected) {
		var c = canvas.getContext("2d");
		
		c.drawImage(card1, 75,675,card1.width/3,card1.height/3);
		if (selected==card1) drawRectangle(canvas,75,675,"green");
		
		c.drawImage(card2, 225,675,card2.width/3,card2.height/3);
		if (selected==card2) drawRectangle(canvas,225,675,"green");
		
		c.drawImage(card3, 375,675,card1.width/3,card1.height/3);
		if (selected==card3) drawRectangle(canvas,375,675,"green");
		
		c.drawImage(card4, 525,675,card2.width/3,card2.height/3);
		if (selected==card4) drawRectangle(canvas,525,675,"green");
		
		c.drawImage(card5, 675,675,card1.width/3,card1.height/3);
		if (selected==card5) drawRectangle(canvas,675,675,"green");
		
		c.drawImage(card6, 825,675,card2.width/3,card2.height/3);
		if (selected==card6) drawRectangle(canvas,825,675,"green");
		
		c.drawImage(submit, 955, 750, submit.width/3, submit.height/3);
		c.drawImage(back, 25,300,card2.width/3,card2.height/3);
		if (submitted) c.drawImage(back, 275,300,card2.width/3,card2.height/3); 
}

    function writeMessage(canvas, message) {
      var c = canvas.getContext('2d');
      c.clearRect(0, 0, canvas.width, canvas.height);
      c.fillStyle = 'red';
      c.font = '18px Arial';
      c.fillText(message, 10, 25);
	  c.fill();
    }
	
	function drawRectangle(canvas, x, y,color) {
      var c = canvas.getContext('2d');
      c.clearRect(0, 0, canvas.width, canvas.height);
	  loadPlayers(canvas);
	  loadCards(canvas,submitted);
	  
	  c.beginPath();
	  c.lineWidth="10";
	  c.strokeStyle=color;
	  c.rect(x, y, 363/3, 527/3);
	  
	  c.stroke();
    }

    function getMousePos(canvas, evt) {
      var rect = canvas.getBoundingClientRect();
      return {
        x: evt.clientX - rect.left,
        y: evt.clientY - rect.top
       };
    }
	
	function addPoints (player) {}
	
	function storyteller (player) {}
	
	function leftGame(player) {}
	
	function zoom(canvas,x, img) {
	 var c = canvas.getContext("2d");
	 c.drawImage(img, x,590,img.width/2,img.height/2);
	}
	
	
	
	function handleMoveEvent(evt) {
      var mousePos = getMousePos(canvas, evt);
      var message = 'Mouse position: ' + mousePos.x + ',' + mousePos.y;
	  loadPlayers(canvas);
	  loadCards(canvas, submitted,selected);
	  if (mousePos.x>=75 && mousePos.y>=675 && mousePos.x<((363/3)+75) && mousePos.y<((527/3)+675)) {
	  
	  loadPlayers(canvas);
	  loadCards(canvas,submitted, selected);
	  }
	  else if (mousePos.x>=225 && mousePos.y>=675 && mousePos.x<((363/3)+225) && mousePos.y<((527/3)+675)) {
	  drawRectangle(canvas,225,675,"green");
	  loadPlayers(canvas);
	  loadCards(canvas, submitted, selected);
	  }
	  else if (mousePos.x>=375 && mousePos.y>=675 && mousePos.x<((363/3)+375) && mousePos.y<((527/3)+675)) {
	  drawRectangle(canvas,375,675,"green");
	  loadPlayers(canvas);
	  loadCards(canvas, submitted, selected);
	  }
	  else if (mousePos.x>=525 && mousePos.y>=675 && mousePos.x<((363/3)+525) && mousePos.y<((527/3)+675)) {
	  drawRectangle(canvas,525,675,"green");
	  loadPlayers(canvas);
	  loadCards(canvas, submitted, selected);
	  }
	  else if (mousePos.x>=675 && mousePos.y>=675 && mousePos.x<((363/3)+675) && mousePos.y<((527/3)+675)) {
	  drawRectangle(canvas,675,675,"green");
	  loadPlayers(canvas);
	  loadCards(canvas, submitted, selected);
	  }
	  else if (mousePos.x>=825 && mousePos.y>=675 && mousePos.x<((363/3)+825) && mousePos.y<((527/3)+675)) {
	  drawRectangle(canvas,825,675,"green");
	  loadPlayers(canvas);
	  loadCards(canvas, submitted, selected);
	  }
	  else if (mousePos.x>=25 && mousePos.y>=300 && mousePos.x<((363/3)+25) && mousePos.y<((527/3)+300)) {
	  drawRectangle(canvas,25,300,"green");
	  loadPlayers(canvas);
	  loadCards(canvas, submitted, selected);
	  }
	  else {
	  loadPlayers(canvas);
	  loadCards(canvas, submitted, selected);
	  }
    }
	
	function handleMoveEvent1 (evt) {
      var mousePos = getMousePos(canvas, evt);
	  c.clearRect(0, 0, canvas.width, canvas.height);
	  loadPlayers(canvas);
	  loadCards(canvas, submitted, selected);
	  if (mousePos.x>=75 && mousePos.y>=675 && mousePos.x<((363/3)+75) && mousePos.y<((527/3)+675)) {
	  zoom(canvas,75,card1);}
	  else if (mousePos.x>=225 && mousePos.y>=675 && mousePos.x<((363/3)+225) && mousePos.y<((527/3)+675)) {
	  zoom(canvas,225,card2);}
	  else if (mousePos.x>=375 && mousePos.y>=675 && mousePos.x<((363/3)+375) && mousePos.y<((527/3)+675)) {
	  zoom(canvas,375,card3);}
	  else if (mousePos.x>=525 && mousePos.y>=675 && mousePos.x<((363/3)+525) && mousePos.y<((527/3)+675)) {
	  zoom(canvas,525,card4);}
	  else if (mousePos.x>=675 && mousePos.y>=675 && mousePos.x<((363/3)+675) && mousePos.y<((527/3)+675)) {
	  zoom(canvas,675,card5);}
	  else if (mousePos.x>=825 && mousePos.y>=675 && mousePos.x<((363/3)+825) && mousePos.y<((527/3)+675)) {
	  zoom(canvas,825,card6);}
	  else if (mousePos.x>=25 && mousePos.y>=300 && mousePos.x<((363/3)+25) && mousePos.y<((527/3)+300)) {
	  zoom(canvas,25,300);}
	  
	  }
	  
	function handleMoveEvent2 (evt) {
      var mousePos = getMousePos(canvas, evt);
	  if (mousePos.x>=75 && mousePos.y>=675 && mousePos.x<((363/3)+75) && mousePos.y<((527/3)+675) ) {
	  selected=card1;
	  drawRectangle(canvas,75,675,"green");
	 }
	  else if (mousePos.x>=225 && mousePos.y>=675 && mousePos.x<((363/3)+225) && mousePos.y<((527/3)+675)) {
	  selected=card2;
	  drawRectangle(canvas,225,675,"green");
	  }
	  else if (mousePos.x>=375 && mousePos.y>=675 && mousePos.x<((363/3)+375) && mousePos.y<((527/3)+675)) {
	  selected=card3;
	  drawRectangle(canvas,375,675,"green");
	  }
	  else if (mousePos.x>=525 && mousePos.y>=675 && mousePos.x<((363/3)+525) && mousePos.y<((527/3)+675)) {
	  selected=card4;
	  drawRectangle(canvas,525,675,"green");
	  }
	  else if (mousePos.x>=675 && mousePos.y>=675 && mousePos.x<((363/3)+675) && mousePos.y<((527/3)+675)) {
	  selected=card5;
	  drawRectangle(canvas,675,675,"green");
	  }
	  else if (mousePos.x>=825 && mousePos.y>=675 && mousePos.x<((363/3)+825) && mousePos.y<((527/3)+675)) {
	  selected=card6;
	  drawRectangle(canvas,825,675,"green");}
	  if (mousePos.x>=955 && mousePos.y>=750 && mousePos.x<((submit.width/3)+955) && mousePos.y<((submit.height/3)+750) && selected!="") {
		submitted=true;
		selected="";
	  }
	  }
</script>

</body>
</html>